### 1. Особенности, модель данных и функциональные возможности колоночных СУБД?
Физически данные хранятся на диске последовательно друг за другом. Что позволяет ускорить поиск в случае если нужны не все поля.
### 2. Что такое пространство ключей, семейство столбцов, строка, столбец и суперстолбец?
Пространство ключей (keyspace) – группа из нескольких семейств столбцов, собранных вместе. Оно логически группирует семейства столбцов и обеспечивает изолированные области имен.

Семейство столбцов (column family) – именованная коллекция строк.

Строка или запись (row) – именованная коллекция столбцов;

столбец или колонка (column) – ячейка с данными, включающая 3 части – имя (column name) в виде массива байтов, метку времени (timestamp) и само значение (value) также в виде байтового массива.
### 3. Что такое ключи и индексы? Как их объявлять и использовать? Отличия распределительного и кластерного индексов?

Первичный ключ состоит из распределительного и кластерного ключа. Распределительный ключ отвечает за распределение данных по узлам, а кластерный за группировку данных внутри узла. Ключи сами по себе могут быть составными.

В Cassandra можно создавать вторичные индексы у любой колонки наподобие SQL индексов. Фактически же, вторичные индексы Cassandra — это скрытая дополнительная таблица, поэтому производительность WHERE запросов по ним хуже запросов по ключевым колонкам.

### 4. Функциональные возможности и языки запросов для СУБД Cassandra?

### 5. Типы данных и TTL в СУБД Cassandra?

Ключевое слово TTL (Time-to-Live (англ.) – Время жизни) позволяет указать, сколько будет существовать запись (созданная, или измененная).

1. BytesType: любые байтовые строки (без валидации);
2. AsciiType: ASCII строка;
3. UTF8Type: UTF-8 строка;
4. IntegerType: число с произвольным размером;
5. Int32Type: 4-байтовое число;
6. LongType: 8-байтовое число;
7. UUIDType: UUID 1-ого или 4-ого типа;
8. TimeUUIDType: UUID 1-ого типа;
9. DateType: 8-байтовое значение метки времени;
10. BooleanType: два значения: true = 1 или false = 0;
11. FloatType: 4-байтовое число с плавающей запятой;
12. DoubleType: 8-байтовое число с плавающей запятой;
13. DecimalType: число с произвольным размером и плавающей запятой;
14. CounterColumnType: 8-байтовый счётчик.

### 6. Возможности и конструкции для определения данных, работы с данными и запросами в СУБД Cassandra?

### 7. Технология репликации и фрагментации в СУБД Cassandra? Как организован и работает кластер?

### 8. Уровни согласованности данных в СУБД Cassandra?

В СУБД Cassandra представлено несколько различных уровней согласованности чтения.

| Уровень      | Описание                                                                                                                                             |
|--------------|------------------------------------------------------------------------------------------------------------------------------------------------------|
| ONE          | Координатор шлёт запросы к ближайшему узлуреплике, читая остальные с целью исправления (read repair) с заранее заданной в конфигурации вероятностью; |
| TWO          | Координатор шлёт запросы к двум ближайшим узлам, выбирая значение с большей меткой времени                                                           |
| THREE        | Координатор шлёт запросы к трем ближайшим узлам, выбирая значение с большей меткой времени                                                           |
| QUORUM       | Собирается кворум, то есть координатор шлёт запросы к более чем половине узлов-реплик, а именно round(N/2)+1, где N — уровень репликации             |
| ALL          | Координатор возвращает данные после прочтения со всех узлов-реплик                                                                                   |
| LOCAL_QUORUM | Собирается кворум узлов в том датацентре, где происходит координация, и возвращаются данные с последней меткой времени                               |
| EACH_QUORUM  | Координатор возвращает данные после собрания кворума в каждом из датацентров                                                                         |

В СУБД Cassandra представлено несколько различных уровней согласованности записи.

| Уровень      | Описание                                                                                                                                                                                                                                     |
|--------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| ANY          | Даёт возможность записать данные, даже если все узлы-реплики не отвечают. Координатор дожидается первого ответа от любого одного узлареплик или данные сохранятся с помощью механизма направленной отправки (hinted handoff) на координаторе |
| ONE          | Координатор шлёт запросы всем узлам-реплик,но возвращает управление пользователю, дождавшись подтверждения от любого первого узла                                                                                                            |
| TWO          | Координатор дожидается подтверждения от двух первых узлов, прежде чем вернуть управление                                                                                                                                                     |
| THREE        | Координатор ждет подтверждения от трех первых узлов, прежде чем вернуть управление                                                                                                                                                           |
| QUORUM       | Координатор дожидается подтверждения записи от более чем половины узлов-реплик, а именно round(N/2)+1, где N — уровень репликации                                                                                                            |
| ALL          | Координатор дожидается подтверждения от всех узлов-реплик                                                                                                                                                                                    |
| LOCAL_QUORUM | Координатор дожидается подтверждения от более чем половины узлов-реплик в том же центре обработки данных, где расположен координатор. Это позволяет избавиться от задержек, связанных с пересылкой данных в другие датацентры                |
| EACH_QUORUM  | Координатор дожидается подтверждения от более чем половины узлов-реплик в каждом центре обработки данных                                                                                                                                     |

### 9. Восстановление данных в СУБД Cassandra?

Snapshot в Cassandra — это процесс создания копии данных из существующих SSTable файлов и записи их в отдельную директорию на диске. Это позволяет сохранить состояние данных в определенный момент времени и использовать эту копию для их восстановления в случае потери или повреждения, а также переноса из одного кластера Cassandra в другой.

SSTableLoader — это инструмент командной строки в Cassandra, используемый для загрузки SSTable (Sorted String Table) в кластер. Последний — это отсортированный набор данных, который представляет собой неизменяемый файл на диске. SSTable состоит из двух файлов: файла данных и файла индекса. Это основной механизм хранения данных в Cassandra.

### 10. Запись на диск и уплотнение данных в СУБД Cassandra?

Cassandra, использует операцию уплотнения или сжатия (compaction) данных для оптимизации дискового пространства путем уменьшения числа сохраненных таблиц и окончательного удаления данных, помеченных на удаление с помощью специальной метки (tombstone). При этом вместо удаления выполняется перезапись, затирая устаревшую информацию новыми данными. Если при чтении попадется колонка с меткой tombstone, этот столбец будет пропущен, словно такого значения никогда и не существовало. Таким образом, со временем столбцы, помеченные меткой tombstone, будут затерты данными с более свежими метками времени (timestamp).

### 11. Поддержка транзакций в СУБД Cassandra?

Транзакций как таковых нет, есть batches.

Команда BATCH объединяет несколько операторов языка изменения данных DML (Data Manipulation Language (англ.) – Язык управления данными) для достижения атомарности и изоляции. Позволяет выполнять запросы «пачками».

### 12. Что такое материализованное представление и как с ним работать?

Структура, которая представляет данные некоторого сложного запроса, но хранит их на диске. Вместо того, чтобы пытаться как-либо скомпоновать данные при помощи запросов, лучше постараться сохранить в колоночное семейство все, что может понадобиться для этого запроса.