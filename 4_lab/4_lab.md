# 4_lab

### 1. Каковы отличительные особенности БД NoSql? Каких типов они бывают?

NoSql базы данных - это бд отличающиеся от привычных нам реляционных БД, которые структурируют данные в таблицы.

Типы:
* Столбчатые (Cassandra, ClickHouse)
* key-value (Memcache, Redis)
* графовые (Neo4j)
* документо-ринетированные (Mongodb)

### 2. Что такое документная БД? Какую модель данных она реализует?

Документная база данных – это тип нереляционных баз данных (NoSQL), предназначенный для хранения и запроса данных в виде документов в структурированных форматах – BSON, а отображают данные в JSON.

Документные базы данных реализуют документно-ориентированную модель данных. Документ-ориентированная модель носит такое название, потому что основным её элементом является документ.

### 3. Какие возможности предоставляют документные БД?

Поддерживают различные функции работы с данными, такие как создание
документа, поиск, редактирование, выборку документов.
* база данных не предписывает определённый формат или схему;
* каждый документ может иметь свою внутреннюю структуру;
* документные БД являются хорошим выбором для быстрой разработки;
* в любой момент можно менять свойства данных, не изменяя структуру или сами
данные.

### 4. Как добавлять и изменять объекты БД MongoDb?

#### Добавление одной записи
``` 
db.users.insertOne(
    {
        username: "username",
        password: "password",
        coldstart: true
    }
);
```

#### Добавление нескольких записей

```
db.users.insertMany(
    [
        {
            "username": "username1",
            "password": "password1",
            "coldstart": true
        },
        {
            "username": "username2",
            "password": "password2",
            "coldstart": false
        }
    ]
);
```

#### Изменение одной записи

```
db.tasks.updateOne(
    {name: "name"},
    {
        $set: {
            "public_tests.1": {
                input: "input1"
            }
        }
    }
);
```

#### Изменение нескольких записей

```
db.tasks.updateMany(
    {
        name: {
            $exists: true
        }
    },
    {
        $set: {
            cf: {
                cf_contest_id: 1,
                cf_index: "12a",
                cf_points: 0.1,
                cf_rating: 1000,
                cf_tags: [
                    1, 2, 3
                ],
            }
        }
    }
);
```

### 5. Как добавлять в объекты БД MongoDb коллекции и вложенные структуры?



### 6. Какие типы запросов поддерживают документные БД?

> CRUD

### 7. Какова структура запроса к данным в БД MongoDb?



### 8. Как выполнить запросы с фильтрацией и проекцией?

```
db.users.find(
    {
        $and: [
            {username: "username"},
            {password: "password"}
        ]
    }
);

db.users.find(
    {
        $or: [
            {username: "username"},
            {password: "password1"}
        ]
    }
);
```

### 9. Как выполнить запросы с сортировкой, группировкой и агрегированием?

#### Сортировка

```
db.tasks.find().sort(
    {
        "cf.cf_points": -1
    }
);
```

#### Группировка

```
db.tasks.aggregate(
    [
        {
            $match: {
                name: {
                    $exists: true
                }
            }
        },
        {
            $group: {
                _id: "$name"
//                _id: ["$name", "$cf.cf_points"]
//                total: {
//                    $avg: "$cf.cf_points"
//                }
            }
        }
    ]
);
```

### 10. Как можно задать связь между объектами и выполнить переход по связи?